# 线程池

---

[TOC]

## 线程池解决什么问题

- 降低创建线程和销毁线程的性能开销

> 在不适用线程池时,没当需要执行异步任务的时候,直接 new 一个线程来运行, 而线程的创建和销毁都有开销的
>
> 线程池里面的线程是可复用的,不需要每次执行异步任务时都重新创建和销毁线程

- 线程池提供了一种资源限制和管理的手段,比如可以限制线程个数,动态新增线程等等

> 每个 ThreadPoolExecutor 也保留了一些基本的统计数据,比如当前线程池完成的任务数目

## 图示

![image-20200712115749599](../../../assets/image-20200712115749599.png)

- `Executors`其实是个工具类，里面提供了好多静态 方法，这些方法根据用 户 选择返回不同的线程池实例 

- `ThreadPoolExecutor` 继承了 `AbstractExecutorService`，成员变量 ctl 是一个` Integer`的原子变量，用来记录线程池状态和线程池中线程个数，类似于 `ReentrantReadWriteLock `使用 一个变量来保存两种信息。

  > ( 高3位)用来表示线程池状态， (低29位)用来表示线程个数

## 五种常用线程池

 [024-5种常用线程池.md](024-5种常用线程池.md) 

## 拒绝策略

 [023-线程池中的拒绝策略.md](023-线程池中的拒绝策略.md) 

- AbordPolicy
- CallerRunsPolicy
- DiscardOldestPolicy
- DiscardPolicy
