# 多路复用 IO 模型

Java NIO 就是基于多路复用 I/O 模型实现的。

在多路复用的 I/O 模型中会一个被称为 Selector 的线程不断轮询多个 Socket 的状态,只有 Sokcet 有读写状态的时候,才会通知用户线程进行 I/O 读写操作

#### 一个线程管理多个 Socket

多路复用 I/O 模型中,只需要一个线程就可以管理多个 Socket (阻塞 IO 模型和非阻塞 I/O 模型需要为每个 Socket 都建立一个单独的线程处理该 Socket 上的数据)并且在真正有 Socket 读写事件是才会使用操作系统的 I/O 资源,大大节约了系统资源

#### 多路复用 IO模型的优势

多路复用 I/O 模型通过一个线程管理多个 Socket 通道,在 Socket 有读写操作时,才会通知用户线程进行 I/O读写操作,因此多复用 I/O 模型更适合

**连接数众多且消息体不大的情况**

尤其是在物联网领域,比如车载设备的实时位置,智能家电状态等实时上报且字节数较小的情况下优势更加明显

一般经过优化后的 16核 32G 服务器能承载约 10 万台设备连接

#### 多路复用 IO模型的劣势

多路复用模型通过一个 Selector 线程以轮询的方式检测在多个Socket 上是否有事件到达,并逐个进行事件处理和响应

因此当事件响应体很大时.Selector 线程会成为性能瓶颈,导致后续的事件迟迟得不到处理,影响西一轮事件循环

**在实际应用中,多路复用方法体内一般不建议做复杂的运算逻辑,只做数据的接收与转发,将具体的业务操作转发给后面的业务线程处理**

#### 