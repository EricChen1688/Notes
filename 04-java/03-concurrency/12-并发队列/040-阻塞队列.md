# 阻塞队列

队列是一种只允许在表的前端进行删除操作，而在表的后端进行插入操作的**线性表**

阻塞队列和一般的队列不同之处在于阻塞队列是“阻塞的”。指的是操作对了的线程的一种状态，一般有两种情况

- 消费者阻塞： 在队列为空时，消费者端的线程都会被自动阻塞（挂起），直到有数据放入队列，消费者线程会被自动唤醒并消费数据

- 生产者阻塞： 在队列已经满且没有可用空间时，生产者端的线程都会被自动阻塞（挂起），直到队列中有空的位置腾出，线程会被自动唤醒并生产数据


## Java 中的阻塞队列有

|      | 阻塞队列                                              | 特点                                                         |
| ---- | ----------------------------------------------------- | ------------------------------------------------------------ |
| 1    | [ArrayBlockingQueue](041-ArrayBlockingQueue.md)       | 数组实现的有界阻塞队列, 此队列按照先进先出(FIFO)的原则 对元素进行排序。 |
| 2    | [LinkedBlockingQueue](042-LinkedBlockingQueue.md)     | **LinkedBlockingQueue**<br/>链表实现的有界阻塞队列, 此队列的默认和最大长度为 **Integer.MAX_VALUE**。此队列按照先进先出的原则对元素进行 排序 |
| 3    | [PriorityBlockingQueue](043-PriorityBlockingQueue.md) | 支持优先级排序的无界阻塞队列, 默认情况下元素采取自然顺序 升序排列。也可以自定义类实现 compareTo()方法来指定元素 排序规则，或者初始化 PriorityBlockingQueue 时，指定构造 参数 Comparator 来对元素进行排序。 |
| 4    | [DelayQueue](045-DelayQueue.md)                       | 优先级队列实现的无界阻塞队列                                 |
| 5    | [SynchronousQueue](046-SynchronousQueue.md)           | 不存储元素的阻塞队列, 每一个 put 操作必须等待一个 take 操 作，否则不能继续添加元素。 |
| 6    | [LinkedTransferQueue](047-LinkedTransferQueue.md)     | 链表实现的无界阻塞队列                                       |
| 7    | [LinkedBlockingDeque](048-LinkedBlockingDeque.md)     | 链表实现的双向阻塞队列                                       |

#### 插入方法

|      | 插入方法            | 特点       | 备注                                                         |
| ---- | ------------------- | ---------- | ------------------------------------------------------------ |
|      | add(e)              | 抛出异常   | 当队列满时,如果再插入元素,会抛出`illegalStateException("Queeue full ")`异常 |
|      | offer(e)            | 返回特殊值 | 成功返回 true                                                |
|      | put(e)              | 一直阻塞   | 当队列满时,会一直阻塞插入方法,直到中断或者队列可用           |
|      | offer(e, time,unit) | 超时退出   | 等待一段时间后退出                                           |

#### 移除方法

|      | 插入方法           | 特点       | 备注                                                       |
| ---- | ------------------ | ---------- | ---------------------------------------------------------- |
| 1    | remove()           | 抛出异常   | 当队列为空时,再获取元素,会抛出`NoSuchElementException`异常 |
| 2    | poll               | 返回特殊值 | 成功返回元素,失败返回 null                                 |
| 3    | take               | 一直阻塞   | 当队列为空时,阻塞当前队列,知道队列中有数据返回             |
| 4    | poll(e, time,unit) | 超时退出   | 等待一段时间后退出                                         |

#### 检查方法

|      | 检查方法 | 特点       | 备注 |
| ---- | -------- | ---------- | ---- |
| 1    | element  | 抛出异常   |      |
| 2    | peek     | 返回特殊值 |      |
| 3    | 不支持   | 一直阻塞   |      |
| 4    | 不支持   | 超时退出   |      |