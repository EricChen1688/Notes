# 什么是资源限制
资源限制指的是在进行并发编程时，程序的执行速度受限于计算机硬件资源或软件资源。

例如

服务器的带宽只有2Mb/s ，某个资源的下载速度是1Mb/s ，系统启动10个线程下载资源，速度也不会变成10Mb/s。

常见的资源限制有：
1. 带宽的上传/下载速度。
1. 硬盘的读写速度
1. CPU的处理速度
1. 数据库的链接数
1. socket 连接数等

## 资源限制引发的问题
例如，一个多线程程序在办公网并发地下载和处理数据，导致CPU利用率达到了100%,几个小时都不能完成任务，后来修改成单线程，一个小时就执行完了。
这个例子告诉我们某些串行代码并行执行时，因为受限于资源，仍然在串行执行，这时候程序不仅不会加快执行，反而可能会更慢，因为增加了上下文切换和资源调度的时间。

## 如何解决资源限制的问题
对于硬件资源限制,可以考虑使用集群并行执行程序。既然单季稻额资源有限制,那么久让程序在多个机器上执行,比如使用 ODPS、Hadoop 或者自己搭建服务器集群,不同的机器号处理不同的机器,可以使用`数据 ID % 数据数` 获取机器编号,然后由对应编号的机制处理这笔机器

## 在资源限制的情况下进行并发编程

如何在资源限制的情况下,让程序执行得更快呢?

根据不同的额资源限制调整程序的并发度,比如下载文件程序依赖于两个资源 

- 宽带速度
- 硬盘读写速度

有数据库的操作时,设计数据库连接数,如果 SQL 语句执行的非常快,而线程的数量比数据库连接数大很多,则某些线程会被阻塞,等待数据库连接