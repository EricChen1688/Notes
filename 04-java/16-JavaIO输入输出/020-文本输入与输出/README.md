# 020-文本输入与输出

[TOC]

## 文本输入输出的简介

在保存数据时，可以选择二进制格式或文本格式。例如，

- 整数1234存储成二进制数时，它被写为由字节00 00 04 D2构成的序列（十六进制表示法）
- 存储成文本格式时，它被存成了字符串“1234”。

尽管二进制格式的I/O高速且高效，但是不宜人来阅读。



## 存储文本字符串

在存储文本字符串时，需要考虑字符编码（character encoding）方式。在Java内部使用的UTF-16编码方式中，

- 字符串“1234”编码为`00 31 00 32 00 33 00 34`（十六进制）。

但是，许多程序都希望文本文件按照其他的编码方式编码。

在UTF-8这种在互联网上最常用的编码方式中，这个字符串将写出为

- `4A 6F 73 C3 A9`

其中并没有用于前3个字母的任何0字节，而字符é占用了两个字节。

OutputStreamWriter类将使用选定的字符编码方式，把Unicode码元的输出流转换为字节流。而InputStreamReader类将包含字节（用某种字符编码方式表示的字符）的输入流转换为可以产生Unicode码元的读入器。

例如，下面的代码就展示了如何让一个输入读入器可以从控制台读入键盘敲击信息，并将其转换为Unicode：

```
Reader in = new InputStreamReader(System.in);
```

这个输入流读入器会默认使用主机系统所使用的默认字符编码方式。在桌面操作系统中，它可能是像Windows 1252或MacRoman这样的古老的字符编码方式。你应该总是在InputStreamReader的构造器中选择一种具体的编码方式。例如，

```java
Reader in = new InputStreamReader(new FileInputStream("data.txt"), StandardCharsets.UTF_8)
```

￼

