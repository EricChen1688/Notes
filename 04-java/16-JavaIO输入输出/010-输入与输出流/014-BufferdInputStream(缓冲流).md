# 014-BufferdInputStream(缓冲流)

[TOC]

## 什么是缓冲流

- BufferedInputStream : 缓冲输入流
- BufferedOutputStream : 缓冲输出流

BufferedInputStream缓冲输入流将写入的数据存储在缓冲区中(一个名为buf 的字节数组字段)

当缓冲区满 会刷新输出流,然后简化数据一次性全部写入到底层输出流

这是一种一次写多个的机制

## 为什么我们需要缓冲流

因为提高性能

BufferedOutputStream 在网络读取时, 每个TCP包或者UDP包都有一定数量的开销,一般大约是40字节,那么我每次发送数据要加上这个开销

- 如果一次发1字节, 要带上开销
- 如果攒多次一起发送,可以节省这些开销

BufferdInputStream类似, 当调用某个流的read()方法时,它首先尝试从缓冲区中读取数据,只有当缓冲区中没有时候,才会从底层原中读取数据(阻塞)

- 从本地磁盘读取文件时,从底层流中读取几百字节的数据与读取1字节的数据几乎一样快,所以Buffered可以显著提高效率
- 从网络连接中读取就不明显,因为网络连接的瓶颈时网络传输速度,而不是网络接口向程序发送数据的速度或者程序运行的速度,但是尽管如此,缓冲和输入没有什么坏处,随着网速加快会更明显



