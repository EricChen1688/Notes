# Java虚拟机栈

#### 是什么

虚拟机栈描述了 Java 方法执行的内存模型,每个方法执行都会创建一个栈帧用于

- 存储局部变量	
  - 存放编译器可知的各种基本数据类型(boolean,byte,char,short,int,float,long,double)
  - 引用对象 reference 类型,通常是指向对象起始位置的指针
- 操作数栈
- 动态链接
- 方法出口
- 等等信息

#### 解决了什么问题

虚拟机在执行 java的时候,方法的相关东东存在哪? 虚拟机怎么执行一个 java 方法的?



#### 怎么解决的?

每一个方法从调用直至执行完成,就会对应着一个栈帧在虚拟机栈中从入栈到出栈的过程,里面存储了方法的各种信息

#### 值得注意的是

- 和程序计数器一样是线程私有的
- 生命周期和线程相同

#### 抛出异常

- 如果线程请求的栈深度大于虚拟机允许的深度 - StackOverflowError 
- 如果虚拟机栈可以动态拓展,但是无法申请到足够的内存 - OutOfMemoryError 异常

## 本地方法栈

本地方法栈和虚拟机栈非常类似,区别:

- 本地方法栈执行 native 方法
- 虚拟机栈执行 java 方法

hotpot 两者是合二为一的