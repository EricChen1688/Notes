# HTTP2 

HTTP2 即超文本传输协议版本 2, 

- HTTP2 通过对头部字段进行压缩,
- 在客户端和服务端建立连接之后允许双向传输数据来提高传输效率,减少延迟

- HTTP2 允许客户端和服务端未建立连接的情况下由服务端提送消息到客户端

- 二进制协议
- 多路复用

## 头压缩

HTTP 是一种无状态的协议,即服务器不需要保存HTTP 的所有细节,发一次请求产生一次相应,不需要不留之前请求的元数据

hTTP2 也遵循这个范式

客户端只有通过发送 cookies 才能使服务器机制客户端的一些状态

- cookies 需要包含的信息可能比较复杂,并且需要每次数据发送都要携带 cookile,严重拖累 HTTP 请求速度,因此头压缩非常有必要

## 服务器推送

服务器推送是 HTTP2 具有的一个请打的功能, 简称缓存推送

服务器推送可以让服务器在客户端不发送请求的情况下,主动将资源推送到客户端,并让客户端缓存起来,从而当需要请求该资源的时候,直接从缓存中取

比如

客户端请求某网页时,客户端发送请求 HTML , 这个时候,服务器不仅把客户端请求的 HTML 返回给客户端,还把 HTML 所需要的 CSS 文件推送给客户端

服务端推送,需要客户端主动开启,开启之后,客户端可以随时选择是否终止该推送服务,如果客户端不需要服务器推送,可以通过发送一个 RST_STREAM 帧来终止

> grpc 基于 HTTP2 协议,所以 gRPC 集成了 HTTP2 的优点,带来诸如双向流,流控,头部压缩,单 TCP 连接上的多复用请求等特性
>
> 从实现和特性来说,grpc 目前更多考虑的是移动端和服务端的通信,gRPC 高效的实现了 HTTP2 的连接多路复用,Body 和 Header 的压缩,这些功能给移动端带来了非常多的好处,比如节省了流量,响应速度快,节约了 CPU资源

## 二进制流

HTTP2 是一个二进制协议