#### 【问题 1】为什么连接的时候是三次握手，关闭的时候却是四次挥手?

答:三次握手是因为因为当 Server 端收到 Client 端的 SYN 连接请求报文后，可以直接发送 SYN+ACK 报文。其中 ACK 报文是用来应答的，SYN 报文是用来同步的。

但是关闭连接时， 当 Server 端收到 FIN 报文时，很可能并不会立即关闭 SOCKET(因为可能还有消息没处理完)，所以只能先回复一个 ACK 报文，告诉 Client 端，"你发的FIN 报文我收到了"。只有等到 我 Server 端所有的报文都发送完了，我才能发送 FIN 报文，因此不能一起发送。故需要四步 握手。

#### 【问题 2】为什么挥手时客户端 TIME_WAIT 状态需要经过 2MSL(最大报文段生存时间)才能返回到 CLOSE 状态?

虽然按道理，四个报文都发送完毕，我们可以直接进入 CLOSE 状态了，但是我们必须假想网络是不可靠的，有可以最后一个 ACK 丢失。所以 TIME_WAIT 状态就是用来重发可能丢 失的 ACK 报文。