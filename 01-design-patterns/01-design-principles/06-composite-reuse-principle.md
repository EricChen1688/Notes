# 合成复用原则(Composite reuse principle)

[TOC]

> **优先使用对象组合/聚合，而不是继承来达到复用的目的**

## 继承复用的缺点

1. 通过继承复用来进行复用的主要问题在于继承复用会破坏系统的封装性，因为继承会将基类的实现细节暴露给子类，由于基类的某些内部细节对子类来说是可见的，所以这种复用又称为“**白箱复用**”。
2. 如果基类发生改变，那么子类的实现也不得不发生改变
3. 从基类继承而来的实现时静态的，不可能在运行时发生改变，没有足够的灵活性。

## 组合或者聚合复用的优势

1. 成员对象的内部实现对于新对象不可见，这种复用又称为“**黑箱复用**”。
2. 耦合度较继承复用较低，成员对象的变化对新对象的影响不大，可以在新对象中根据实际需要有选择性的调用对象成员的操作。

## 组合复用和继承复用使用场景

1. 如果两个类是`Has-A`关系，使用聚合或者组合
2. 如果两个类是`Is-A`关系，使用继承

是通过现在的类组合成一个新的类，叫做组合，如果这种组合是动态的，则叫聚合。

如何理解”动态“，也就是可以随时加进来也可以随时删除，人—>器官，组合；人—>衣服，聚合； 