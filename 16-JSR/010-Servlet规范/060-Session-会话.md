# Session会话

Servlet没有提出协议无关的会话规定，而是每个通信协议自己规定，HTTP对应的会话接口是HttpSession。

- Cookie是常用的会话跟踪机制，其中Cookie的标准名字必须为JSESSIONID
- 另外一种会话跟踪机制则是URL重写，即在URL后面添加一个jsessionid参数，当支持Cookie和SSL会话的情况下，不应该使用URL重写作为会话跟踪机制。

会话ID通过调用HttpSession.getId()获取，且能在创建后通过调用HttpServletRequest. changeSessionId()改变。HttpSession对象必须限定在ServletContext级别，会话里面的属性不能在不同ServletContext之间共享。

Servlet可将某对象以键值对形式保存到HttpSession中，处于同一个ServletContext和相同会话中的任意Servlet都可以使用会话中保存的对象。如果某些对象想要在保存到会话或从会话中移除时得到通知，可以让某个对象实现HttpSessionBindingListener接口，里面的valueBound和valueUnbound分别会在对应时刻触发。

Servlet容器默认会话的超时时间，可以通过HttpSession的getMaxInactiveInterval方法获取和setMaxInactiveInterval方法设置。
分布式环境中，会话的所有请求在同一时间必须仅被一个JVM处理，分布式容器迁移会话时会通知实现了HttpSessionActivationListener接口的所有会话属性。