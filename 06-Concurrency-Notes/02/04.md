[返回目录](/README.md)

# 用锁来保护状态

对于可能被多个线程同时访问的**可变状态变量**，在访问它是都需要持有同一个锁，在这种情况下我们成状态变量是由这个锁保护的。



## 加锁约定

一种常见的加锁约定是，将所有的可变状态都封装在对象内部，并通过对象的内置锁对所有访问可变状态的代码路径进行同步，使得在该对象上不会发生并发访问。

对于每个包含多个变量的不变性条件，其中涉及的所有变量都需要由一个锁来保护。

