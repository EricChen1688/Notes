# 010-为什么要有客户端负载均衡

[TOC]

## 为什么要有客户端负载均衡

当系统面临大量的用户访问，负载过高的时候，通常会增加服务器数量来进行横向扩展，多个服务器的负载需要均衡，以免出现服务器负载不均衡，部分服务器负载较大，部分服务器负载较小的情况。

**通过负载均衡，使得集群中服务器的负载保持在稳定高效的状态，从而提高整个系统的处理能力。**

## 负载均衡的分类

系统的负载均衡分为软件负载均衡和硬件负载均衡。

- 软件负载均衡使用独立的负载均衡程序或系统自带的负载均衡模块完成对请求的分配派发。
- 硬件负载均衡通过特殊的硬件设备进行负载均衡的调配。

软负载均衡一般分为两种类型

- 基于DNS的负载均衡
- 基于IP的负载均衡

## 基于DNS的负载均衡

利用DNS实现负载均衡，就是在DNS服务器配置多个A记录，不同的DNS请求会解析到不同的IP地址。大型网站一般使用DNS作为第一级负载均衡。

## 基于IP的负载均衡

基于IP的负载均衡根据请求的IP进行负载均衡。

LVS就是具有代表性的基于IP的负载均衡实现。

## 反向代理负载均衡

但是目前来说，大家最为熟悉的，最为主流的负载均衡技术还是反向代理负载均衡。所

有主流的Web服务器都热衷于支持基于反向代理的负载均衡。

它的核心工作是代理根据一定规则，将HTTP请求转发到服务器集群的单一服务器上。

## 客户端负载均衡和服务端负载均衡区别

Ribbon使用的是客户端负载均衡。

客户端负载均衡和服务端负载均衡最大的区别在于**服务端地址列表的存储位置**，在客户端负载均衡中，所有的客户端节点都有一份自己要访问的服务端地址列表，这些列表统统都是从服务注册中心获取的；

而在服务端负载均衡中，客户端节点只知道单一服务代理的地址，服务代理则知道所有服务端的地址。

在Spring Cloud中我们如果想要使用客户端负载均衡，方法很简单，使用@LoadBalanced注解即可，这样客户端在发起请求的时候会根据负载均衡策略从服务端列表中选择一个服务端，向该服务端发起网络请求，从而实现负载均衡。