# 010-客户端负载均衡原理

[TOC]

## 常见的负载均衡算法

| 算法                            | 描述                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| 随机(Random)                    | 在实例列表中随机选择某个实例                                 |
| 轮询(RoundRobin)                | 循环取下一个, 比如有 1,2,3 ;第一次取1,第二次取2,第三次取3,第四次取1 |
| 最少连接数(Least Connections)   | 每次取连接数最小的实例                                       |
| 一致性哈希(Consisitent Hashing) | 基于一致性哈希算法, 总是将相同参数的请求落在同一个实例上     |
| 权重随机(Weightd Random)        | 比如有4个实例, 实例A 权重为10, B 权重为30, C 权重为 40, D 权重为20<br />每次随机取100以内的整数, <br />如果在 1-10之间则选A<br />如果在20-30之间则选B |

## 客户端负载均衡

客户端负载均衡表示这个操作是在客户端进行的, 客户端获取了所有的实例列表, 并且根据算法选择其中一个实例

有了负载均衡算法之后, 在开发的时候无需获取 ServiceInstance 实例, 而是直接进行服务调用, 因为 SpringCloud 为我们屏蔽了负载均衡的策略

## SpringCloud推荐的负载均衡组件

Ribbon已经进入维护期, 推荐使用 Spring Cloud Loadbalancer, 简称 SCL

