# 010-为什么我们需要全链路监控

[TOC]

## 为什么

在微服务架构下, 系统由大量服务组成, 每个服务可能是不同团队开发的、使用不同的编程语言, 部署在几千台服务器上, 而且横跨多个不同的数据中心等

一次请求往往涉及到多个服务, 在系统发生故障的时候, 想要快速定位和解决问题, 就要追踪服务请求序列

## 常用的监控组件

- Zipkin。由Twitter公司开源，开放源代码的分布式跟踪系统，用于收集服务的定时数据，以解决微服务架构中的延迟问题，包括数据的收集、存储、查找和展现。Spring Cloud Sleuth 中集成了Zipkin。
- Pinpoint。是一款对Java编写的大规模分布式系统的APM工具，是由韩国Naver公司开源的分布式跟踪组件。
- Skywalking。一款国产的APM（**A**pplication **P**erformance **M**onitor）组件，是一个对Java分布式应用程序集群的业务运行情况进行追踪、告警和分析的系统。

## 如何选择分布式链路监控组件

探针的性能消耗。APM组件对服务的影响应该做到足够小。在一些高度优化过的服务中，即使一点点损耗也会很容易察觉，而且有可能迫使在线服务的部署团队不得不将跟踪系统关停。

- 易用性。对于开发应用的程序员来说，是不需要知道有跟踪系统这回事的。所以，引入链路监控组件应该是对开发人员透明的。
- 可扩展性。能够支持的组件越多越好，或者提供便捷的插件开发API，对于一些没有监控到的组件，应用开发者也可以自行扩展。
- 数据的分析。数据的分析要快，分析的维度要尽可能多分析要全面，尽量避免二次开发。跟踪系统能提供足够快的信息反馈，就可以对生产环境下的异常状况做出快速反应。