# 03-分布式锁续期

https://mp.weixin.qq.com/s/y_Uw3P2Ll7wvk_j5Fdlusw

### 面试问题

Redis锁的过期时间小于业务的执行时间该如何续期？

### 问题分析

首先如果你之前用Redis的分布式锁的姿势正确,并且看过相应的官方文档的话,这个问题`So easy`.我们来看

很多同学在用分布式锁时,都是直接百度搜索找一个Redis分布式锁工具类就直接用了，其实Redis分布式锁比较正确的姿势是采用`redisson`这个客户端工具

### 如何回答

默认情况下,加锁的时间是30秒.如果加锁的业务没有执行完,那么到 30-10 = 20秒的时候,就会进行一次续期,把锁重置成30秒.那这个时候可能又有同学问了,那业务的机器万一宕机了呢?宕机了定时任务跑不了,就续不了期,那自然30秒之后锁就解开了呗.

## Redisson分布式锁的底层原理 



![image-20200811175712355](../../../assets/image-20200811175712355.png)

https://mp.weixin.qq.com/s/y_Uw3P2Ll7wvk_j5Fdlusw

