# 13-事务隔离级别怎么选

https://dev.mysql.com/doc/refman/5.7/en/innodb-transaction-isolation-levels.html

RU 和 Serializable 肯定不能用。

为什么有些公司要用 RC，或者说网上有些文章推 荐有 RC?

RC 和 RR 主要有几个区别:

- RR 的间隙锁会导致锁定范围的扩大。
-  条件列未使用到索引，RR 锁表，RC 锁行。
- RC 的“半一致性”(semi-consistent)读可以增加 update 操作的并发性。

在 RC 中，一个 update 语句，如果读到一行已经加锁的记录，此时 InnoDB 返回记录最近提交的版本，由 MySQL 上层判断此版本是否满足 update 的 where 条件。若满 足(需要更新)，则MySQL会重新发起一次读操作，此时会读取行的最新版本(并加锁)

实际上，如果能够正确地使用锁(避免不使用索引去加锁)，只锁定需要的数据， 用默认的 RR 级别就可以了。

在我们使用锁的时候，有一个问题是需要注意和避免的，我们知道，排它锁有互斥 的特性。一个事务或者说一个线程持有锁的时候，会阻止其他的线程获取锁，这个时候 会造成阻塞等待，如果循环等待，会有可能造成死锁。

